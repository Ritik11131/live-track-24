<div class="layout-topbar">
  <a class="app-logo ml-7" routerLink="/tracking">
    <!-- <img
      alt="app logo"
      [ngStyle]="{ width:  '12rem' }"
      [src]="config.logo" -->

    

    <span class="app-name">{{ config.title }}</span>
  </a>
  <p *ngIf="authService.isLoginInAsChild">
    "You are logged in as a child user. Once you refresh, you will go back to
    the admin"
  </p>
  
  
  <button
    #menubutton
    class="topbar-menubutton p-link"
    type="button"
    (click)="onMenuButtonClick()"
  >
    <span></span>
  </button>

  <ul class="topbar-menu">
    <li *ngFor="let item of tabs; let i = index">
      <a
        [routerLink]="item.routerLink"
        routerLinkActive="active-route"
        [routerLinkActiveOptions]="
          item.routerLinkActiveOptions || {
            paths: 'exact',
            queryParams: 'ignored',
            fragment: 'ignored',
            matrixParams: 'ignored'
          }
        "
        [fragment]="item.fragment"
        [queryParamsHandling]="item.queryParamsHandling"
        [preserveFragment]="item.preserveFragment!"
        [skipLocationChange]="item.skipLocationChange!"
        [replaceUrl]="item.replaceUrl!"
        [state]="item.state"
        [queryParams]="item.queryParams"
      >
        <span>{{ item.label }}</span>
      </a>
      <i class="pi pi-times" (click)="removeTab($event, item, i)"></i>
    </li>
  </ul>
  <div class="pr-4 flex justify-content-center" (click)="toggleDropdown()">
    <i class="pi pi-bell text-3xl" pBadge value="{{ notificationCount }}"></i>

 
    <div *ngIf="isDropdownVisible" class="card positioning">
      <div class="flex w-full align-items-center justify-content-between gap-2">
          <h3 class="m-0 font-semibold">Notifications</h3>
          <!-- <i class="pi pi-arrow-right" (click)="goToNotification()"></i> -->
          <i class="pi pi-times cursor-pointer"></i>
      </div>
      <ul class="max-h-15rem overflow-y-scroll p-0">
          <li *ngIf="notifications.length === 0" class="px-3 py-4">
              No notifications
          </li>
          <li 
              *ngFor="let notification of notifications"
              class="px-3 align-items-center flex gap-3 py-4 white-space-nowrap flex card bg-gray-100 hover:bg-gray-300"
          >
              <img style="height:25px;width:25px" src="/assets/notification.png" />
              <div class="flex flex-column">
                  <div>{{ notification.details.vNo }}</div>
                  <div>{{ notification.type }}</div>
              </div>
              <div>{{ notification.eventtime }}</div>
          </li>
      </ul>
  </div>
  
  </div>
  <div class="topbar-profile">
    <button
      class="topbar-profile-button p-link"
      type="button"
      pStyleClass="@next"
      enterClass="hidden"
      enterActiveClass="scalein"
      leaveToClass="hidden"
      leaveActiveClass="fadeout"
      [hideOnOutsideClick]="true"
    >
      <!-- <img
        alt="app logo"
        [ngStyle]="{
          width: '4rem'
        }"
        [src]="config.logo"
      /> -->
      <span class="profile-details">
        <span class="profile-name">{{ authService.username }}</span>
        <span class="profile-job">{{ authService.userType }}</span>
      </span>
      <i class="pi pi-angle-down"></i>
    </button>
    <ul
      class="list-none p-3 m-0 border-round shadow-2 hidden absolute surface-overlay origin-top sm:w-20rem mt-2 right-0 top-auto"
    >
      <li>
        <a
          (click)="changePassword()"
          pRipple
          class="flex p-2 border-round align-items-center hover:surface-hover transition-colors transition-duration-150 cursor-pointer"
        >
          <i class="pi pi-lock mr-3"></i>
          <span>Change Password</span>
        </a>
        <a
          *ngIf="authService.isLoginInAsChild"
          (click)="childlogout()"
          pRipple
          class="flex p-2 border-round align-items-center transition-colors transition-duration-150 cursor-pointer"
        >
          <i class="pi pi-power-off mr-3"></i>
          <span>Child Sign Out</span>
        </a>
        <a
          (click)="logout()"
          pRipple
          style="color: red;"
          class="flex p-2 border-round align-items-center hover:bg-red-300 hover:text-white transition-colors transition-duration-150 cursor-pointer"
        >
          <i class="pi pi-power-off mr-3"></i>
          <span>Sign Out</span>
        </a>
      </li>
    </ul>
  </div>
</div>
