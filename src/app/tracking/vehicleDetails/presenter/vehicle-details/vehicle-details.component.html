<div class="w-full max-w-full">
  <!-- Simple Tabs -->
  <div class="mt-4 mb-4">
    <div class="flex gap-1 overflow-x-auto" #tabsBox>
      <button
      pButton
        *ngFor="let tab of tabs"
        class="px-3 py-2 text-sm border-round-md flex-shrink-0"
        [class]="tab.active ? 'bg-primary text-white' : 'surface-100 text-700'"
        (click)="tab.action()"
      >
        {{ tab.label }}
      </button>
    </div>
  </div>

  <!-- Data Cards -->
<div class="grid">
  <!-- Last Updated -->
  <div class="col-12 md:col-6">
    <div class="surface-card p-3 border-round h-full">
      <div class="flex align-items-center gap-3">
        <i class="pi pi-sync text-primary"></i>
        <div>
          <div class="font-bold text-sm leading-tight" *ngIf="data && data.position">
           <p class="truncate">{{ data.position.servertime }}</p> 
          </div>
          <div class="text-md text-600">Last Updated</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Status -->
  <div class="col-12 md:col-6">
    <div class="surface-card p-3 border-round-md h-full">
      <div class="flex align-items-center gap-3">
        <i class="pi pi-book text-green-600"></i>
        <div>
          <div class="font-bold text-sm leading-tight" *ngIf="data && data.position">
            {{ data.position.status.status !== "dormant" ? data.position.status.status : "Idle" }},
            {{ data.position.status.duration }}
          </div>
          <div class="text-md text-600">Current Status</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ignition -->
  <div class="col-12 md:col-6">
    <div class="surface-card p-3 border-round-md h-full">
      <div class="flex align-items-center gap-3">
        <img class="w-1rem h-1rem"
             src="{{ vehicleListRepo.getDetailPageIcons(15, data.position.details.ign) }}"
             alt="ignition">
        <div>
          <div class="font-bold text-sm leading-tight" *ngIf="data && data.position">
            {{ data.position.details.ign === true ? "Engine On" : "Engine Off" }}
          </div>
          <div class="text-md text-600">Ignition Status</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Service Expiry -->
  <div class="col-12 md:col-6" *ngIf="data && data.validity">
    <div class="surface-card p-3 border-round-md h-full">
      <div class="flex align-items-center gap-3">
        <i class="pi pi-clock text-purple-600"></i>
        <div>
          <div class="font-bold text-sm leading-tight">
            {{ data.validity.nextRechargeDate }}
          </div>
          <div class="text-md text-600">Expires In</div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12">
    <div class="surface-card p-3 border-round-md h-full">
      <div class="flex align-items-center gap-3">
        <i class="pi pi-map-marker text-purple-600"></i>
        <div>
          <div class="font-bold text-sm leading-tight">
            {{ address }}
          </div>
          <div class="text-md text-600">Current Location</div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Vehicle Details -->
  <div class="surface-card p-4 border-round-md mt-4" *ngIf="detailItems && detailItems.length > 0">
    <div class="font-bold text-lg text-900 mb-3">Vehicle Details</div>
    <div class="flex flex-column gap-3">
      <ng-container *ngFor="let item of detailItems">
        <div class="flex align-items-center justify-content-between" *ngIf="item.condition()">
          <div class="flex align-items-center gap-2">
            <img src="{{vehicleListRepo.getDetailPageIcons(item.iconType, item.detailValue())}}" 
                 alt="detail icon" 
                 class="w-1-5rem h-1-5rem">
            <span class="text-sm text-600">{{ item.detailText }}</span>
          </div>
          <span class="text-sm font-semibold text-900">{{ item.labelText() }}</span>
        </div>
      </ng-container>
    </div>
  </div>
</div>

<!-- Modals -->
<app-date-picker *ngIf="dateComponent"></app-date-picker>
<app-dialog *ngIf="dialogComponent"></app-dialog>
