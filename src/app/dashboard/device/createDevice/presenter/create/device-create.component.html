<div *ngIf="layout===7" class="card">
  <p-tabView [(activeIndex)]="activeTabIndex" (onChange)="onTabChange($event)">
    <p-tabPanel header="Basic Details">
      <span class="text-xl text-2xl font-bold mb-4 block">{{ buttonText }}</span>
      <div class="grid">
        <div class="col-12 lg:col-2">
          <p class="m-0 p-0 text-xl line-height-3 mr-3">
            Please Provide necessary data to {{ buttonText }}
          </p>
        </div>
        <div class="col-12 lg:col-10">
          <ng-container *ngTemplateOutlet="deviceFormTemplate"></ng-container>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="Configuration Details">
      <ng-template pTemplate="content"> 
        <app-configuration-detail></app-configuration-detail>
      </ng-template>
    </p-tabPanel>
  </p-tabView>
</div>

<div *ngIf="layout===1||layout===2" class="card">
  <span class="text-xl text-2xl font-bold mb-4 block">{{ buttonText }}</span>
  <div class="grid">
    <div class="col-12 lg:col-2">
      <p class="m-0 p-0 text-xl line-height-3 mr-3">
        Please Provide necessary data to {{ buttonText }}
      </p>
    </div>
    <div class="col-12 lg:col-10">
      <ng-container *ngTemplateOutlet="deviceFormTemplate"></ng-container>
    </div>
  </div>
</div>

<ng-template #deviceFormTemplate>
  <form [formGroup]="deviceForm" (ngSubmit)="onSubmit()" class="grid formgrid p-fluid">
    <div class="field mb-4 col-12 md:col-6">
      <label for="deviceId" class="font-medium text-xl">Unique Id *</label>
      <span class="p-input-icon-right mb-2">
        <input class="text-xl" id="deviceId" formControlName="deviceId" type="text" pInputText />

        
      </span>


      <small class="text-red-500 text-sm" *ngIf="isSubmitted && deviceForm.get('deviceId')?.invalid">Unique id is required</small>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="deviceImei" class="font-medium text-xl">Device IMEI *</label>
      <input class="text-xl" id="deviceImei" formControlName="deviceImei" type="text" pInputText />
      <small class="text-red-500 text-sm" *ngIf="isSubmitted && deviceForm.get('deviceImei')?.invalid">Device IMMEI is required</small>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="fkDeviceType" class="font-medium text-xl">Device Type</label>
      <p-dropdown [options]="deviceService.deviceType" id="fkDeviceType" optionLabel="name" optionValue="id" formControlName="fkDeviceType"></p-dropdown>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="fkVehicleType" class="font-medium text-xl">Vehicle Type</label>
      <p-dropdown [options]="deviceService.vehicleType" optionLabel="name" optionValue="id" id="fkVehicleType" formControlName="fkVehicleType" placeholder="Select a category"></p-dropdown>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="simPhoneNumber" class="font-medium text-xl">Primary Sim Number *</label>
      <input class="text-xl" id="simPhoneNumber" formControlName="simPhoneNumber" type="text" pInputText />
      <small class="text-red-500 text-sm" *ngIf="isSubmitted && deviceForm.get('simPhoneNumber')?.invalid">Primany Sim Number is required</small>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="fkSimOperator" class="font-medium text-xl">Select Primary Sim Operator</label>
      <p-dropdown [options]="deviceService.operatorType" id="fkSimOperator" optionLabel="name" optionValue="id" formControlName="fkSimOperator"></p-dropdown>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="simSecPhoneNumber" class="font-medium text-xl">Secondary Sim Number</label>
      <input class="text-xl" id="simSecPhoneNumber" formControlName="simSecPhoneNumber" type="text" pInputText />
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="fkSecSimOperator" class="font-medium text-xl">Select a Secondary Sim Operator</label>
      <p-dropdown [options]="deviceService.operatorType" optionLabel="name" optionValue="id" id="fkSecSimOperator" placeholder="Select Secondary Sim Operator" formControlName="fkSecSimOperator"></p-dropdown>
    </div>
    <div class="field mb-4 col-12 md:col-6">
      <label for="vehicleNo" class="font-medium text-xl">Vehicle Number *</label>
      <input class="text-xl" id="vehicleNo" formControlName="vehicleNo" type="text" pInputText />
      <small class="text-red-500 text-sm" *ngIf="isSubmitted && deviceForm.get('vehicleNo')?.invalid">Vehicle Number required</small>
    </div>
    <div class="field mb-4 col-12 md:col-12">
      <label for="description" class="font-medium text-xl">Description</label>
      <textarea id="description" rows="5" cols="30" class="text-xl" pInputTextarea formControlName="description"></textarea>
    </div>
    <div class="col-12 flex gap-2 flex-row">
      <button pButton pRipple type="submit" style="background-color: #22c55e" label="Save" class="w-auto text-xl mt-3"></button>
      <button pButton pRipple type="button" (click)="cancel()" style="background-color: #1797B0" label="Cancel" class="w-auto text-xl mt-3"></button>
    </div>
  </form>
</ng-template>

<p-toast></p-toast>
