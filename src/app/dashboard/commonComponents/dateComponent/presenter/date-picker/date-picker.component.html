<div
  class="flex align-items-center justify-content-center h-screen w-screen absolute top-0 left-0"
  style="z-index: 3000; background-color: rgba(0, 0, 0, 0.6)"
>
  <div class="flex flex-column bg-white xl:w-3 md:w-4 sm:w-6 w-10 p-5 border-round-2xl shadow-4">
    <!-- Header -->
    <div class="flex justify-content-between align-items-center mb-4">
      <h2 class="m-0 text-xl font-bold text-900">Select Date</h2>
      <i
        class="pi pi-times cursor-pointer text-xl text-600 hover:text-red-500 transition-colors"
        (click)="closeUserLinkForm()"
      ></i>
    </div>

    <!-- Selected Range Display -->
    <div
      class="p-3 border-round-lg bg-gray-100 text-center text-md font-semibold text-700 mb-4 shadow-inner"
    >
      {{ selectedDateRange || getPlaceholder() }}
    </div>

    <!-- Quick Select Buttons in 2-column layout -->
    <div *ngIf="range" class="grid mb-4">
      <div class="col-6">
        <button
          pButton
          class="w-full border-round-lg p-3 text-lg font-medium"
          (click)="selectDateRange('today')"
          label="Today"
        ></button>
      </div>
      <div class="col-6">
        <button
          pButton
          class="w-full border-round-lg p-3 text-lg font-medium"
          (click)="selectDateRange('yesterday')"
          label="Yesterday"
        ></button>
      </div>
      <div class="col-6" *ngIf="!restrictDateComponents">
        <button
          pButton
          class="w-full border-round-lg p-3 text-lg font-medium"
          (click)="selectDateRange('last7days')"
          label="Last 7 Days"
        ></button>
      </div>
      <div class="col-6" *ngIf="!restrictDateRange">
        <button
          pButton
          class="w-full border-round-lg p-3 text-lg font-medium"
          (click)="selectDateRange('thisMonth')"
          label="This Month"
        ></button>
      </div>
      <!-- Custom Range full width -->
      <div class="col-12">
        <button
          pButton
          class="w-full border-round-lg p-3 text-lg font-medium bg-indigo-500 text-white hover:bg-indigo-600"
          (click)="showCustomRange()"
          label="Custom Range"
        ></button>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-content-end gap-2 mb-4" *ngIf="range">
      <button
        pButton
        class="px-5 py-2 text-lg font-semibold border-round-lg text-white"
        (click)="showResult('applyDate')"
      >
        Apply
      </button>
      <button
        pButton
        class="px-5 py-2 text-lg font-semibold border-round-lg bg-red-500 hover:bg-red-600 text-white"
        (click)="closeUserLinkForm()"
      >
        Cancel
      </button>
    </div>

    <!-- Custom Range Picker -->
    <div
      *ngIf="customRange"
      class="flex flex-column gap-3 border-top-1 surface-border pt-4"
    >
      <h3 class="m-0 text-lg font-semibold text-800">Custom Range</h3>

      <div *ngIf="!restrictDateComponents" class="flex flex-column gap-3">
        <p-calendar
          placeholder="Start Date"
          [style]="{ width: '100%' }"
          [(ngModel)]="date1"
          [showTime]="true"
          [showSeconds]="true"
          [maxDate]="date2"
        ></p-calendar>

        <p-calendar
          placeholder="End Date"
          [style]="{ width: '100%' }"
          [(ngModel)]="date2"
          [showTime]="true"
          [showSeconds]="true"
          [minDate]="date1"
          [maxDate]="maxDate"
        ></p-calendar>
      </div>

      <p-calendar
        *ngIf="restrictDateComponents"
        placeholder="Select Date"
        [style]="{ width: '100%' }"
        [(ngModel)]="date3"
        [maxDate]="maxDate"
      ></p-calendar>

      <small
        *ngIf="dateError1 && restrictDateRange"
        class="text-red-500 font-medium"
      >
        Entered date has more than 7 day gap
      </small>

      <!-- Custom Range Buttons -->
      <div class="flex justify-content-end gap-2 mt-3">
        <button
          pButton
          class="px-5 py-2 text-lg font-semibold border-round-lg text-white"
          (click)="showResult(restrictDateComponents ? 'applyCustomDate' : 'applyCustomRange')"
        >
          Apply
        </button>
        <button
          pButton
          class="px-5 py-2 text-lg font-semibold border-round-lg bg-red-500 hover:bg-red-600 text-white"
          (click)="closeUserLinkForm()"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>
